/* static/css/mobile_fix.css */
/* VERSIÓN ULTRA-APP V5 - GRID CORREGIDO (2 COLUMNAS) */

@media screen and (max-width: 992px) {

    /* =========================================
       1. CONTENEDOR PRINCIPAL (EVITAR DESBORDE)
       ========================================= */
    html, body {
        overflow-x: hidden !important; /* Prohíbe scroll horizontal fantasma */
        width: 100% !important;
        background-color: #f4f6f9 !important;
        font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Arial, sans-serif !important;
    }

    /* Ocultar elementos innecesarios */
    .breadcrumb, #content-related, .main-footer {
        display: none !important;
    }

    /* Ajuste del área de contenido para que respete los bordes del celular */
    .content-wrapper, #content, .container-fluid {
        padding: 10px !important;
        margin: 0 !important;
        width: 100% !important;
        box-sizing: border-box !important;
    }

    /* Títulos centrados */
    h1 {
        font-size: 22px !important;
        font-weight: 800 !important;
        color: #2c3e50;
        text-align: center;
        margin: 15px 0 20px 0 !important;
    }

    /* =========================================
       2. EL GRID SYSTEM (LA SOLUCIÓN A TUS CAJAS DESALINEADAS)
       ========================================= */
    
    /* Forzamos a que las filas PERMITAN bajar de renglón (Wrap) */
    .row {
        display: flex !important;
        flex-wrap: wrap !important;
        margin-right: -5px !important;
        margin-left: -5px !important;
        justify-content: flex-start !important; /* Alinear a la izquierda */
    }

    /* --- REGLA DE ORO: 2 COLUMNAS PARA BOTONES --- */
    /* Apuntamos a las columnas que suelen tener los botones (col-lg-3, col-6, etc) */
    .col-lg-3, .col-md-3, .col-sm-6, .col-6, .col-xs-6 {
        position: relative !important;
        width: 100% !important;
        padding-right: 5px !important;
        padding-left: 5px !important;
        margin-bottom: 10px !important;
        
        /* AQUÍ ESTÁ EL TRUCO: 50% de ancho exacto */
        flex: 0 0 50% !important;
        max-width: 50% !important;
    }

    /* Excepción: Si es una columna muy ancha (como gráficas), ocupa el 100% */
    .col-lg-12, .col-md-12, .col-12 {
        flex: 0 0 100% !important;
        max-width: 100% !important;
    }

    /* =========================================
       3. BOTONES DE ACCIÓN (SMALL BOXES)
       ========================================= */
    .small-box {
        border-radius: 15px !important;
        box-shadow: 0 4px 10px rgba(0,0,0,0.05) !important;
        background: #fff !important;
        border: none !important;
        margin-bottom: 0 !important; /* El margen lo da la columna */
        text-align: center !important;
        height: 100% !important; /* Para que todos tengan la misma altura */
        display: flex !important;
        flex-direction: column !important;
        justify-content: center !important;
        padding: 15px 5px !important;
    }

    .small-box .inner {
        padding: 0 !important;
    }

    /* Iconos dentro de las cajas (Más, Carrito, etc) */
    .small-box h3 {
        font-size: 24px !important; /* Icono/Texto grande */
        margin: 0 0 5px 0 !important;
        color: #2c3e50 !important;
    }
    
    /* Texto de la etiqueta (Ej: Nueva Cotización) */
    .small-box p {
        font-size: 13px !important;
        color: #555;
        margin: 0 !important;
        line-height: 1.2 !important;
        white-space: normal !important; /* PERMITE QUE EL TEXTO BAJE DE LÍNEA */
        font-weight: 600 !important;
    }

    /* Ocultar iconos de fondo gigantes y footer */
    .small-box .icon { display: none !important; }
    .small-box-footer { display: none !important; }

    /* =========================================
       4. TARJETAS DE DINERO (KPIs) - ESTILO CARDS
       ========================================= */
    /* A estas las queremos diferenciar visualmente */
    /* Normalmente son divs que siguen a los botones. */
    /* Si queremos que ocupen 100% para leer bien los números: */
    
    /* OPCIONAL: Descomenta esto si prefieres las tarjetas de dinero a ANCHO COMPLETO */
    /* .col-lg-4 {
        flex: 0 0 100% !important;
        max-width: 100% !important;
    } 
    */

    /* Ajuste de contenido dentro de las tarjetas de dinero */
    .callout, .card {
        border-radius: 15px !important;
        box-shadow: 0 2px 8px rgba(0,0,0,0.05) !important;
        background: white !important;
        margin-bottom: 0 !important;
        border-left-width: 5px !important; /* Borde de color grueso a la izquierda */
    }

    /* =========================================
       5. GRÁFICAS Y TABLAS
       ========================================= */
    canvas {
        width: 100% !important;
        max-width: 100% !important;
        height: auto !important;
        background: white;
        border-radius: 15px;
        padding: 10px;
        box-shadow: 0 2px 8px rgba(0,0,0,0.05);
    }

    /* Tablas estilo Data Grid (Limpias) */
    .card-body.table-responsive {
        display: block !important;
        width: 100% !important;
        overflow-x: auto !important;
        -webkit-overflow-scrolling: touch;
        background: white;
        border-radius: 15px;
        border: 1px solid #eee;
        padding: 0 !important;
    }
    
    table.table { margin: 0 !important; }
    
    /* Headers */
    table.table thead th {
        background-color: #2c3e50 !important;
        color: white !important;
        padding: 10px !important;
        font-size: 11px !important;
        text-transform: uppercase;
        white-space: nowrap;
        border: none !important;
    }
    
    /* Celdas */
    table.table tbody td {
        padding: 12px 10px !important;
        font-size: 13px !important;
        border-bottom: 1px solid #f0f0f0 !important;
        white-space: nowrap;
        color: #333 !important;
    }
    
    /* 1ra Columna Sticky */
    table.table tbody td:first-child {
        position: sticky;
        left: 0;
        z-index: 10;
        background: #fff !important;
        border-right: 2px solid #f4f4f4;
        font-weight: 700 !important;
        color: #2980b9 !important;
    }
    table.table thead th:first-child {
        position: sticky;
        left: 0;
        z-index: 11;
    }
    
    /* Links numéricos en negro */
    table.table tbody td a { color: #333 !important; text-decoration: none !important; }
    table.table tbody td:first-child a { color: #2980b9 !important; }

    /* Botones en tabla */
    table.table .btn {
        padding: 5px 10px !important;
        font-size: 11px !important;
        border-radius: 5px !important;
    }

    /* =========================================
       6. BOTONES FLOTANTES (GUARDAR)
       ========================================= */
    .submit-row {
        position: fixed !important;
        bottom: 0;
        left: 0;
        width: 100%;
        background: white !important;
        padding: 10px 15px !important;
        box-shadow: 0 -4px 15px rgba(0,0,0,0.1) !important;
        z-index: 9999;
        display: flex;
        gap: 10px;
    }
    .submit-row input { display: none !important; }
    .submit-row input[type="submit"] {
        display: block !important;
        width: 100% !important;
        background-color: #27ae60 !important;
        color: white !important;
        height: 50px !important;
        border-radius: 12px !important;
        font-size: 16px !important;
        font-weight: bold;
        text-transform: uppercase;
        border: none;
    }
    
    /* Botón Agregar Principal */
    .object-tools a.btn {
        display: block;
        width: 100%;
        padding: 12px !important;
        background-color: #2980b9 !important;
        color: white !important;
        border-radius: 12px !important;
        font-size: 15px !important;
        text-align: center;
        margin-bottom: 15px;
    }
}