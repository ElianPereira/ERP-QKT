{% extends "admin/base_site.html" %}
{% load static %}

{% block content %}
<style>
    /* Forzar pantalla completa */
    .content-wrapper > .content { padding: 0 !important; }
    .container-fluid, .row, .col-12 { padding: 0 !important; margin: 0 !important; width: 100% !important; max-width: 100% !important; }
    #content-main { width: 100% !important; max-width: 100% !important; }

    /* Tarjeta Full Screen */
    .card { border: none; border-radius: 0; margin: -15px -10px 0 -10px; width: calc(100% + 20px); box-shadow: none; }
    .card-header { background-color: #356685; color: white; padding: 15px 20px; border-radius: 0 !important; }

    /* Estilos FullCalendar */
    .fc { font-family: -apple-system, sans-serif; }
    .fc-toolbar-title { font-size: 1.5rem !important; font-weight: 600; color: #333; }
    .fc-col-header-cell { background-color: #f4f6f9; padding: 10px 0 !important; }
    .fc-event { border: none; padding: 3px 5px; font-size: 0.85rem; border-radius: 4px; box-shadow: 0 1px 2px rgba(0,0,0,0.1); cursor: pointer; }
</style>

<div class="card">
    <div class="card-header d-flex justify-content-between align-items-center">
        <h3 class="card-title" style="margin:0; font-size: 1.3rem;">
            <i class="fas fa-calendar-alt"></i> Calendario de Eventos
        </h3>
        <div>
            <span class="badge badge-light mr-2" style="color:#333;"><i class="fas fa-circle text-success"></i> Confirmados</span>
            <span class="badge badge-light" style="color:#333;"><i class="fas fa-circle text-secondary"></i> Borradores</span>
        </div>
    </div>
    <div class="card-body p-0">
        <div id='calendar' style="padding: 20px;"></div>
    </div>
</div>

<script src='https://cdn.jsdelivr.net/npm/fullcalendar@6.1.8/index.global.min.js'></script>
<script>
  document.addEventListener('DOMContentLoaded', function() {
    var calendarEl = document.getElementById('calendar');
    var eventos = JSON.parse("{{ eventos_json|escapejs }}");

    var calendar = new FullCalendar.Calendar(calendarEl, {
      initialView: 'dayGridMonth',
      locale: 'es', 
      height: '85vh', 
      expandRows: true, 
      headerToolbar: { left: 'prev,next today', center: 'title', right: 'dayGridMonth,listMonth' },
      buttonText: { today: 'Hoy', month: 'Mes', list: 'Lista' },
      events: eventos, 
      dayMaxEvents: true, 
      firstDay: 1, 
      eventDidMount: function(info) { info.el.title = info.event.title; },
      eventClick: function(info) {
          if (info.event.url) {
              window.open(info.event.url, "_self");
              info.jsEvent.preventDefault();
          }
      }
    });
    calendar.render();
  });
</script>
{% endblock %}